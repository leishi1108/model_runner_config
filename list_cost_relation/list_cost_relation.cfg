[DEFAULT]
workspace = /home/shilei/fbpmx/list_cost_relation/list_cost_relation_${date}


[project]
actions = generate

[datasets]
keys = project_list_cost_out, label_studio_data, positive, negative


[dataset_label_studio_data]
class = LabelStudioDataset
project_ids = 58,59
reset = False


[dataset_project_list_cost_out]
class = ReadFileDataset
format = json
dir = /home/shilei/corpus/list_cost_relation/project_list_cost_out.json
reset = False


[dataset_project_list_cost_trans]
class = MapDataset
input = project_list_cost_out
expression = exec('import uuid') or {'relation_id': uuid.uuid4().hex, 'label': int(x[label])}
keep_exists = True
reset = False



[dataset_positive]
class = FilterDataset
input = project_list_cost_trans
filters = ("label" in x) and (x["label"] == 1)
reset = False

[dataset_negative]
class = FilterDataset
input = project_list_cost_trans
filters = ("label" in x) and (x["label"] == 0) and ( ( int(x["pid_list_map_cost_negative"])<10000 ) or (int(x["pid_list_map_cost_negative"])>=10000) and (int(x["relation_id"][-5:],16) % 10 < 2))
reset = False


