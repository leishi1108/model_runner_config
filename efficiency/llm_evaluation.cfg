[DEFAULT]
workspace = /home/shilei/fbpmx/efficiency/llm_evaluation_${date}

[project]
actions = generate
datasets = partial_test_trans

[dataset_partial_test]
class = ReadExcelDataset
dir = /home/shilei/corpus/efficiency/cde预测成本分部分项.xlsx
reset = False

[dataset_partial_test_trans]
class = MapDataset
input = test
expression = exec('import re; import uuid') or {'item_id': uuid.uuid4().hex , "item_name": x["majorSentence"], "item_feature": x["minorSentence"], "task_type": "清单"}
keep_exists = True

[model_dsr1_partial]
class = LlmDsr1PartialModel
item_name_key = item_name
item_feature_key = item_feature
item_task_type_key = task_type
need_fields = item_name, item_feature, task_type
re_predict = False

[evaluator_llm_partial_predict]
class = SimplePredictor
datasets = partial_test_trans
models = dsr1_partial

[stage_partial_evaluate]
class = DatasetValStage
dataset = test_data_fixed_for_export
output_fields = list_key, upper_item_name, item_name, item_feature, 分部分项预期, 构件预期, 材料预期, 模型材料, 指导价材料, 指导价规则材料, 指导价材料属性
output_names = 清单id, 上级名称, 清单名称, 清单特征, 分部分项预期, 构件预期, 材料预期, 模型材料, 指导价材料, 指导价规则材料, 指导价材料属性
save_res_path = /home/shilei/fbpmx/efficiency/llm_evaluation_${date}/stage_partial_evaluate.xlsx
map_dict = {"模型材料":"材料预期", "指导价材料": "材料预期", "指导价规则材料": "材料预期"}

