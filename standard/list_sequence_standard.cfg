[DEFAULT]
workspace = /home/shilei/fbpmx/list_sequence_standard/list_sequence_standard_${date}

[project]
actions = generate
datasets = raw_list_sequence

[dataset_raw_list_sequence]
class = ReadExcelDataset
dir = /home/shilei/corpus/list_sequence/清单工序0904_20251212.xlsx


[dataset_raw_list_sequence_trans]
class = MapDataset
input = raw_list_sequence
expression = exec('import re; import uuid') or {"item_id": uuid.uuid4().hex,
    "item_name": str(x["清单名称"]) if x["清单名称"] is not None else "",

    "item_feature": str(x["清单特征"]) if x["清单特征"] is not None else "",

    "pid": str(x["工程id"]),
    "item_name_wk": f'清单名称: {x["清单名称"]}' if x["清单名称"] is not None else "",
    "item_feature_wk": f'清单特征: {x["清单特征"]}' if x["清单特征"] is not None else "",
    "upper_item_name_wk": f'全路径: {x["上级名称"]}' if x["上级名称"] is not None else "",
    "element_label": [] if x["构件预期修改"] == "无构件" else list(sorted(x["构件预期修改"].split(","))) if x["构件预期修改"] is not None and len(x["构件预期修改"])>0 else list(sorted(x["构件预期"].split(","))) if x["构件预期"] is not None and len(x["构件预期"])>0 else [],
    "material_label": [] if x["材料预期修改"] == "无材料" else list(sorted(x["材料预期修改"].split(","))) if x["材料预期修改"] is not None and len(x["材料预期修改"])>0 else list(sorted(x["材料预期"].split(","))) if x["材料预期"] is not None and len(x["材料预期"])>0 else [],
    "collection_label": [] if x["集合预期修改"] == "无集合" else list(sorted(x["集合预期修改"].split(","))) if x["集合预期修改"] is not None and len(x["集合预期修改"])>0 else list(sorted(x["集合预期"].split(","))) if x["集合预期"] is not None and len(x["集合预期"])>0 else [],
    }
keep_exists = True