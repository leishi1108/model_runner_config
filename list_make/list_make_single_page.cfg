[DEFAULT]
workspace = /home/shilei/fbpmx/list_make/list_make_single_page_${date}

[project]
actions = generate, evaluate, run
datasets = dwg_data


[dataset_raw_dwg_data]
class = DwgDataset
remote_url = http://10.127.91.94:9002
cluster_eps = 500
cluster_min_samples = 5
max_cluster_num = 20
dir = /home/shilei/corpus/list_make/重庆中海房建项目图纸-建筑和结构/19.10.26 中海卡福厂建筑 施工图审查后修改（20191011止）/中海卡福厂建筑 施工图审查后修改（20191011止）/说明/施工图设计总说明20190617修改-审图确认版-07_t9.dwg


[dataset_dwg_data]
class = MapDataset
input = raw_dwg_data
expression = exec('import re; import uuid; import json') or {
    "item_id": uuid.uuid3(uuid.NAMESPACE_DNS, str(x["filepath"]).split(".dwg")[0] + "-" + str(x["filename"]).split(".svg")[0] + "-" + str(x["attrib"]["id"]) ).hex,
    "item_key": str(x["filepath"]).split(".dwg")[0] + "-" + str(x["filename"]).split(".svg")[0] + "-" + str(x["attrib"]["id"]),
    "id": x["attrib"]["id"], "x": x["attrib"]["x"], "y": x["attrib"]["y"], "text": x["text"],
    "request": json.dumps( {"id": x["attrib"]["id"], "x": x["attrib"]["x"], "y": x["attrib"]["y"], "text": x["text"]}, ensure_ascii=False),
    }
keep_exists = True

