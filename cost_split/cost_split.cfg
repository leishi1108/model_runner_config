[DEFAULT]
workspace = /home/shilei/fbpmx/cost_split/cost_split_${date}

[project]
actions = generate, evaluate
datasets = cost_split_data
evaluators = cde_predict


[dataset_cost_split_data]
class = ReadExcelDataset
format = xlsx
dir = /home/shilei/corpus/cost_split/分包价格库-全量去重-20240730.xlsx


[dataset_cost_split_data_trans]
class = MapDataset
input = cost_split_data
expression = exec('import re; import uuid') or {"item_id": uuid.uuid4().hex, "item_name": x["分包价格名称"],
    "item_feature": x["工作内容"] if x["工作内容"] is not None else "",
    "upper_item_name": "",
    "project_name": ""}
keep_exists = True


[model_cde]
class = CdeServiceModel
task_type = 清单
item_name_key = item_name
item_feature_key = item_feature
upper_item_name_key = upper_item_name
project_name_key = project_name
need_fields = item_name,item_feature,upper_item_name,project_name


[evaluator_cde_predict]
class = SimplePredictor
datasets = cost_split_data_trans
models =cde
num_workers = 4