[DEFAULT]
workspace = /home/shilei/fbpmx/list_extract/list_extract_for_price_library_connect_${date}

[project]
actions = generate,evaluate
datasets = price_library_connect_data
evaluators = cde_predict

[dataset_raw_price_library_connect_data]
class = ReadFileDataset
format = json
dir = /home/shilei/corpus/cost_split/price_library_connect_data.json


[dataset_price_library_connect_data]
class = MapDataset
input = raw_price_library_connect_data
expression = exec('import re; import uuid') or {"item_id": uuid.uuid4().hex,
    "item_name": x["bq_item_content"],
    "item_feature": x["bq_item_spec"] if x["bq_item_spec"] is not None else "",
    "upper_item_name": x["bq_item_title_with_upper"],
    "price_item_name": x["Description"],
    "price_item_feature": x["Features"] if x["Features"] is not None else ""}
keep_exists = True


[dataset_price_library_connect_data_test]
class = FilterDataset
input = price_library_connect_data
filters = "project_id" in x and x["project_id"] in ["11878##77b32e70-996f-48eb-8776-0c767349c89b##true", "10146##6685502734882f2e72d9b624##true", "11760##71666de9-6012-473d-b6bf-6bc5fe496586##true", "12002##7cf5ff22-cd51-49df-bcfa-2ae187bc73c7##true", "10013##6682041148d3e27107efd6bb##true", "13905##d7c0f454-7552-45e0-82d7-ab3a07be60a6##true", "08190##665ec8d1f95fcd0001ae529b##true", "13809##d34326ec-1042-42a1-bb89-056a0d96eb21##true", "06314##663b20ab7263f500012b3514##true", "07187##664c5004616c9e0001263fe3##true", "12319##8c29d157-8332-4d81-9655-6b142c5cf421##true", "06175##66372c62bbe8090001e54f51##true", "12082##80e73dae-c585-4813-baca-197446830ae0##true", "13553##c75f5396-3868-4d8e-956b-d6d5d9b8f3cf##true", "10866##669714f8eea25522972019f9##true", "11676##6d4d5d1d-18c4-42cd-9ede-cac7220ea0ee##true", "12224##875af3f6-0a07-41e3-b252-762260a9a074##true", ]


[evaluator_cde_predict]
class = SimplePredictor
datasets = price_library_connect_data_test
models = list_cde, list_tjqd2, price_cde, price_tjqd2
num_workers = 4


[model_list_cde]
class = CdeServiceModel
task_type = 清单
item_name_key = item_name
item_feature_key = item_feature
upper_item_name_key = upper_item_name
need_fields = item_name,item_feature,upper_item_name

[model_list_tjqd2]
class = GDETJQD2ServiceModel
task_type = 清单
item_name_key = item_name
item_feature_key = item_feature
upper_item_name_key = upper_item_name
need_fields = item_name,item_feature,upper_item_name


[model_price_cde]
class = CdeServiceModel
task_type = 清单
item_name_key = price_item_name
item_feature_key = price_item_feature
need_fields = price_item_name, price_item_feature

[model_price_tjqd2]
class = GDETJQD2ServiceModel
task_type = 清单
item_name_key = price_item_name
item_feature_key = price_item_feature
need_fields = price_item_name, price_item_feature


