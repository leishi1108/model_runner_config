[DEFAULT]
workspace = /home/shilei/fbpmx/list_extract/pricelib_extract_formal_${date}

[project]
actions = generate, evaluate
datasets = yunnan_price_library_data_expected
evaluators = gde_predict

[dataset_raw_yunnan_price_library_data]
class = ReadExcelDataset
dir = /home/shilei/corpus/cost_split/工程数据分包指导价库_云南建投202408-解析结果(工程数据分包价格库).xlsx
header_row = 1


[dataset_yunnan_price_library_data_expected]
class = FilterDataset
input = raw_yunnan_price_library_data
filters = "uid.2" in x and x["uid.2"] is not None

[dataset_yunnan_price_library_data]
class = MapDataset
input = yunnan_price_library_data_expected
expression = exec('import re; import uuid') or {"item_id": uuid.uuid4().hex, "item_name": x["名称"], "item_feature": x["项目特征"], "upper_item_name": "", "pid": "云南建设202408"}
keep_exists = True

[evaluator_gde_predict]
class = SimplePredictor
datasets = yunnan_price_library_data
models = yunnan_gde_pricelib, yunnan_cde_cost_subject
num_workers = 8

[model_yunnan_gde_pricelib]
class = GDETPriceLibServiceModel
task_type = 清单
item_name_key = item_name
item_feature_key = item_feature
need_fields = item_name, item_feature


[model_yunnan_cde_cost_subject]
class = CdeServiceModel
task_type = 成本科目
item_name_key = item_name
need_fields = item_name
