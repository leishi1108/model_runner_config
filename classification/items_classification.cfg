[DEFAULT]
workspace = /home/shilei/fbpmx/items_classification/items_classification_${date}


[project]
actions = generate, train, evaluate


[evaluators]
keys = predictor, model_evaluator


[models]
keys = roberta_based_trained, roberta_pretrained_trained

[datasets]
keys = test, train

[dataset_items_v2_0919_v3_classify]
class = ReadFileDataset
format = json
dir = /home/shilei/corpus/items_data/items_v2_0919_v3_classify.json
reset = False

[dataset_test]
class = FilterDataset
input = items_v2_0919_v3_classify
filters = ("item_id" in x) and ( int(x["item_id"][-5:],16) % 10 < 2 )
reset = False


[dataset_train]
class = FilterDataset
input = items_v2_0919_v3_classify
filters = ("item_id" in x) and ( int(x["item_id"][-5:],16) % 10 >= 2 )
reset = False


[model_roberta_based_trained]
class = MultiClassificationModel
data = train
bert_base = /home/shilei/model_repository/chinese-roberta-wwm-ext
text=text
learning_rate = 2.0e-5
num_epochs = 50
train_ratio = 0.85
batch_size = 128
max_seq_length = 128
labels=专业,分部分项,材料,材料属性,构件,构件属性,工序,工种,费用,机械,群体,单体,配套建筑,楼层,流水段,空间


[model_roberta_pretrained_trained]
class = MultiClassificationModel
data = train
bert_base = /home/shilei/model_repository/chinese-roberta-wwm-ext_ft
text=text
learning_rate = 2.0e-5
num_epochs = 50
train_ratio = 0.85
batch_size = 128
max_seq_length = 128
labels=专业,分部分项,材料,材料属性,构件,构件属性,工序,工种,费用,机械,群体,单体,配套建筑,楼层,流水段,空间



[evaluator_predictor]
class = SimplePredictor
datasets = test
models = roberta_based_trained, roberta_pretrained_trained


[evaluator_model_evaluator]
class=MultiClassificationEvaluator
categories = 专业,分部分项,材料,材料属性,构件,构件属性,工序,工种,费用,机械,群体,单体,配套建筑,楼层,流水段,空间
dataset= test
models = roberta_based_trained, roberta_pretrained_trained

